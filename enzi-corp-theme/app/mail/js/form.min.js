var jq=jQuery,Usr=function(){};Usr.Forms=function(){};var pr=Usr.Forms.prototype;pr.createForm=function(){this.eventRequired(),this.eventValidation(),this.eventFilter(),this.eventFire(),jq("#auto_name").length>0&&jq("#auto_kana").length>0&&(jq.fn.autoKana("#auto_name","#auto_kana",{katakana:!1}),jq.fn.autoKana("#auto_name2","#auto_kana2",{katakana:!1}))},pr.errView=function(e,r){var n=jq(e).prop("name");void 0===n&&(n=jq(e).prop("id"));var i="err_"+n,a=jq(e).parents(".fm_action").find("."+i);r?a.slideUp("fast"):a.slideDown("fast")},pr.eventRequired=function(e){var r=this;(n=jq("[required]")).length>0&&jq.each(n,function(e,n){var i=jq(n).prop("type");if("email"!=i&&"tel"!=i){var a=jq(n).prop("name");"fm_mail"!=a&&"fm_mail_rep"!=a&&"postcode"!=a&&"postcode1"!=a&&"postcode2"!=a&&"address1"!=a&&"address2"!=a&&"address3"!=a&&jq(n).blur(function(){""==jq(n).val()?r.errView(n,!1):r.errView(n,!0)})}});var n;(n=jq(".fm_required")).length>0&&jq.each(n,function(e,r){var n=jq(r).find("input:radio, input:checkbox");n.change(function(){!function(){var e=0;jq.each(n,function(r,n){jq(n).prop("checked")||e++}),e==n.length?$(r).find(".err_fm_required").slideDown("fast"):$(r).find(".err_fm_required").slideUp("fast")}()})})},pr.validationMail=function(e){return!!e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},pr.validationTel=function(e){return!!e.match(/^[0-9-]{10,13}$/)},pr.validationPostcode=function(e){return!!e.match(/^[0-9-]{7,8}$/)},pr.validationPostcode1=function(e){return!!e.match(/^[0-9]{3}$/)},pr.validationPostcode2=function(e){return!!e.match(/^[0-9]{4}$/)};var errorHolderCnt=!0;pr.errorHolder=function(e){return!0===e||!1===e?(this.errorHolderCnt=e,this.errorHolderCnt):this.errorHolderCnt},pr.blurMail=function(e,r,n){var i=jq(n).val(),a=jq(n).prop("name");if(r)if(""==i)e.errView(n,!1),e.errorHolder(!1);else if(e.validationMail(i))if("fm_mail_rep"==a){jq("[name=fm_mail]").val()!=i?(e.errView(n,!1),e.errorHolder(!1)):e.errView(n,!0)}else e.errView(n,!0);else e.errView(n,!1),e.errorHolder(!1);else if(""!=i)if(e.validationMail(i))if("fm_mail_rep"==a){jq("[name=fm_mail]").val()!=i?(e.errView(n,!1),e.errorHolder(!1)):e.errView(n,!0)}else e.errView(n,!0);else e.errView(n,!1),e.errorHolder(!1);else e.errView(n,!0)},pr.blurTel=function(e,r,n){var i=jq(n).val();r?""==i?(e.errView(n,!1),e.errorHolder(!1)):e.validationTel(i)?e.errView(n,!0):(e.errView(n,!1),e.errorHolder(!1)):""!=i?e.validationTel(i)?e.errView(n,!0):(e.errView(n,!1),e.errorHolder(!1)):e.errView(n,!0)},pr.blurPostcode1_2=function(e,r,n){var i=r.val(),a=n.val();""!=i&&""!=a?e.validationPostcode1(i)&&e.validationPostcode2(a)?e.errView(n,!0):(e.errView(n,!1),e.errorHolder(!1)):e.errView(n,!0)},pr.blurAddress=function(e,r,n,i,a,t){""==r.val()||""==n||""==i.val()||""==a.val()||""==t.val()?(e.errView(i,!1),e.errorHolder(!1)):e.errView(i,!0)},pr.changeFile=function(e,r){var n=jq(r).prop("files")[0];void 0!==n?n.size>1048576?(e.errView(r,!1),e.errorHolder(!1)):"image/jpeg"!==n.type&&"image/png"!==n.type&&"image/gif"!==n.type&&"application/zip"!==n.type&&"application/pdf"!==n.type&&"application/vnd.ms-excel"!==n.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==n.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==n.type&&"application/postscript"!==n.type&&"image/x-photoshop"!==n.type?(e.errView(r,!1),e.errorHolder(!1)):e.errView(r,!0):e.errView(r,!0)},pr.changeAgree=function(e,r,n){"同意する"==jq(r).val()&&(jq(r).prop("checked")?e.errView(n,!0):(e.errView(n,!1),e.errorHolder(!1)))},pr.eventValidation=function(){var e=this;(c=jq("input[type=email]")).length>0&&jq.each(c,function(r,n){var i=jq(n).prop("required");jq(n).blur(function(){e.blurMail(e,i,n)})});(c=jq("[type=tel]")).length>0&&jq.each(c,function(r,n){var i=jq(n).prop("required");jq(n).blur(function(){e.blurTel(e,i,n)})});var r=jq("[name=postcode1]"),n=jq("[name=postcode2]");if(1==n.length){var i=n.prop("required");if(n.blur(function(){e.blurPostcode1_2(e,r,n)}),i){var a=jq("[name=address1]"),t=jq("[name=address2]"),o=jq("[name=address3]");o.blur(function(){e.blurAddress(e,r,n,a,t,o)})}}var c;(c=jq("[type=file]")).length>0&&jq.each(c,function(r,n){jq(n).change(function(){e.changeFile(e,this)})});var l=jq("[name=agree]");l.length>0&&l.change(function(){e.changeAgree(e,this,l)})},pr.eventFilter=function(){jq("[name=postcode]").change(function(){var e=jq(this).val();e=(e=e.replace(/−|一|ー/g,"-")).replace(/[０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),jq(this).val(e)}),jq("[name=postcode1]").change(function(){var e=jq(this).val();e=e.replace(/[０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),jq(this).val(e)}),jq("[name=postcode2]").change(function(){var e=jq(this).val();e=e.replace(/[０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),jq(this).val(e)}),jq("[name=fm_kana]").change(function(){var e=function(e){var r,n,i=[];for(r=e.length-1;0<=r;r--)n=e.charCodeAt(r),i[r]=12353<=n&&n<=12438?n+96:n;return String.fromCharCode.apply(null,i)}(jq(this).val());jq(this).val(e)}),jq("[name=fm_kana2]").change(function(){var e=function(e){var r,n,i=[];for(r=e.length-1;0<=r;r--)n=e.charCodeAt(r),i[r]=12353<=n&&n<=12438?n+96:n;return String.fromCharCode.apply(null,i)}(jq(this).val());jq(this).val(e)}),jq("[type=tel]").change(function(){var e=jq(this).val();e=(e=e.replace(/−|一|ー/g,"-")).replace(/[０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),jq(this).val(e)}),jq("[type=email]").change(function(){var e=jq(this).val();e=e.replace(/[Ａ-Ｚａ-ｚ０-９－！”＃＄％＆’（）＝＜＞，．？＿［］｛｝＠＾～￥]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),jq(this).val(e)})},pr.eventFire=function(){var e=this,r=jq("#rdo_txt");if(1==r.length){var n=jq(".fm_radio").find('input:radio[value="その他"]');r.focus(function(){n.prop("checked",!0);var r=jq(".fm_radio");if(r.length>0){var i=r.find("input:radio"),a=0;jq.each(i,function(e,r){jq(r).prop("checked")||a++}),a==i.length?e.errView(r,!1):e.errView(r,!0)}}),n.click(function(){jq(this).prop("checked")?r.focus():r.val("")});var i=n.attr("id"),a=jq(".fm_radio").find("input[type=radio]");jq.each(a,function(e,n){jq(n).attr("id")!=i&&jq(n).click(function(){r.val("")})})}var t=jq("#chk_txt");if(1==t.length){var o=jq(".fm_checkbox").find('input:checkbox[value="その他"]');t.focus(function(){o.prop("checked",!0);var r=jq(".fm_checkbox");if(r.length>0){var n=r.find("input:checkbox"),i=0;jq.each(n,function(e,r){jq(r).prop("checked")||i++}),i==n.length?e.errView(r,!1):e.errView(r,!0)}}),o.click(function(){jq(this).prop("checked")?t.focus():t.val("")})}},pr.eventCheck=function(e){var r=this;r.errorHolder(!0);var n=jq(e).parents(".fm_action");jq.when(function(){(e=n.find("[required]")).length>0&&jq.each(e,function(e,n){var i=jq(n).prop("type");if("email"!=i&&"tel"!=i){var a=jq(n).prop("name");"fm_mail"!=a&&"fm_mail_rep"!=a&&"postcode"!=a&&"postcode1"!=a&&"postcode2"!=a&&"address1"!=a&&"address2"!=a&&"address3"!=a&&(""==jq(n).val()?(r.errView(n,!1),r.errorHolder(!1)):r.errView(n,!0))}});(e=n.find(".fm_required")).length>0&&jq.each(e,function(e,n){var i=jq(n).find("input:radio, input:checkbox"),a=0;jq.each(i,function(e,r){jq(r).prop("checked")||a++}),a==i.length?($(n).find(".err_fm_required").slideDown("fast"),r.errorHolder(!1)):$(n).find(".err_fm_required").slideUp("fast")});(e=n.find("input[type=email]")).length>0&&jq.each(e,function(e,n){var i=jq(n).prop("required");r.blurMail(r,i,n)});var e;(e=n.find("input[type=tel]")).length>0&&jq.each(e,function(e,n){var i=jq(n).prop("required");r.blurTel(r,i,n)});var i=n.find("[name=postcode1]"),a=n.find("[name=postcode2]");if(1==a.length){var t=a.prop("required");if(r.blurPostcode1_2(r,i,a),t){var o=jq("[name=address1]"),c=jq("[name=address2]"),l=jq("[name=address3]");r.blurAddress(r,i,a,o,c,l)}}var d=n.find("[name=agree]");d.length>0&&jq.each(d,function(e,n){r.changeAgree(r,n,d)})}()).done(function(){if(r.errorHolder(1))return n.submit(),!0;if(jq("#form_top").length){var e=jq("#form_top").offset().top;jq("html,body").animate({scrollTop:e},"fast")}})},jQuery(function(){jq('[class^="err_"]').hide(),jq('[class^="error_"]').hide();var e=new Usr.Forms;e.createForm(),jq(".fm_btn_confirm").click(function(r){return e.eventCheck(this),!1})});